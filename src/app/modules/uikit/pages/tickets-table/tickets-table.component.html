<div class="p-4">
  <div class="flex flex-col md:flex-row md:items-center justify-between mb-4">
    <!-- Filtro de búsqueda por texto -->
    <input type="text" [(ngModel)]="searchQuery" (input)="filterByText()" placeholder="Buscar..."
      class="border px-4 py-2 rounded-md w-full md:w-1/3 mb-2 md:mb-0" />

    <!-- Filtro de búsqueda por fecha -->
    <input type="date" [(ngModel)]="selectedDate" (change)="filterByDate()"
      class="border px-4 py-2 rounded-md w-full md:w-1/4" />
  </div>

  <div class="overflow-x-auto">
    <table class="text-muted-foreground table w-full table-auto border-collapse border-0 text-left align-middle leading-5">
      <thead class="border-muted/20 text-muted-foreground border text-xs">
        <tr class="bg-gray-100 text-gray-600 uppercase text-sm leading-normal">
          <th class="py-3 px-6 text-left">ID</th>
          <th class="py-3 px-6 text-left">Título</th>
          <th class="py-3 px-6 text-left">Empresa</th>
          <th class="py-3 px-6 text-left">Estado</th>
          <th class="py-3 px-6 text-left">Prioridad</th>
          <th class="py-3 px-6 text-left">Categoría</th>
          <th class="py-3 px-6 text-left">Fecha Generado</th>
          <th class="py-3 px-6 text-left">Fecha_asignado</th>
          <th class="py-3 px-6 text-left">Fecha_resuelto</th>
          <th class="py-3 px-6 text-left">vendedor</th>
          <th class="py-3 px-6 text-left">Observaciones</th>
        </tr>
      </thead>
      <tbody class="text-gray-600 text-sm font-light">
        <tr *ngFor="let ticket of filteredTickets" class="border-b border-gray-200 hover:bg-gray-50">
          <td class="py-3 px-6 text-left">{{ ticket.id }}</td>
          <td class="py-3 px-6 text-left">{{ ticket.titulo }}</td>
          <td class="py-3 px-6 text-left">{{ ticket.empresa }}</td>
          <td class="py-10 px-1 text-left">
            <select [(ngModel)]="ticket.status" class="border rounded px-2 py-1 text-sm w-auto min-w-[120px] max-w-full"
              [ngClass]="{
                'bg-yellow-200 text-yellow-800': ticket.status === 'Pendiente',
                'bg-green-200 text-green-800': ticket.status === 'En proceso',
                'bg-red-200 text-red-800': ticket.status === 'Seguimiento',
                'bg-blue-200 text-blue-800': ticket.status === 'Cerrado',
                'bg-purple-200 text-purple-800': ticket.status === 'Ganado',
                'bg-orange-200 text-orange-800': ticket.status === 'Perdido',
                'bg-gray-200 text-gray-800': ticket.status === 'Desestimado'
              }">
              <option value="en proceso">Pendiente</option>
              <option value="resuelto">En proceso</option>
              <option value="pendiente">Seguimiento</option>
              <option value="pendiente">Cerrado</option>
              <option value="pendiente">Ganado</option>
              <option value="pendiente">Perdido</option>
              <option value="pendiente">Desestimado</option>
            </select>
          </td>
          <td class="py-3 px-6 text-left">
            <select [(ngModel)]="ticket.prioridad" class="border rounded px-2 py-1 text-sm"
              [ngClass]="{
                'bg-yellow-200 text-yellow-800': ticket.prioridad === 'Alta',
                'bg-orange-200 text-orange-800': ticket.prioridad === 'Media',
                'bg-gray-200 text-gray-800': ticket.prioridad === 'Baja'
              }">
              <option value="Alta">Alta</option>
              <option value="Media">Media</option>
              <option value="Baja">Baja</option>
            </select>
          </td>
          <td class="py-2 px-1 text-left">
            <select [(ngModel)]="ticket.categoria" class="border rounded px-2 py-1 text-sm w-auto min-w-[120px] max-w-full">
              <option value="Seguridad">Seguridad</option>
              <option value="Mantenimiento">Mantenimiento</option>
              <option value="Redes">Redes</option>
            </select>
          </td>
          <td class="py-3 px-6 text-left">{{ ticket.fecha_generado }}</td>
          <td class="py-3 px-6 text-left">{{ ticket.fecha_asignado }}</td>
          <td class="py-3 px-6 text-left">{{ ticket.fecha_resuelto }}</td>
          <td class="py-3 px-6 text-left">{{ ticket.username }}</td>
          <td class="py-3 px-6 text-left">{{ ticket.observaciones }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
